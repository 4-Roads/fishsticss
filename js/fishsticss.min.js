Array.prototype.indexOf||(Array.prototype.indexOf=function(e,r){var t,n=r?r:0,s;if(!this)throw new TypeError;if(s=this.length,0===s||n>=s)return-1;for(0>n&&(n=s-Math.abs(n)),t=n;s>t;t++)if(this[t]===e)return t;return-1});var arrayUnique=function(e){return e.filter(function(e,r,t){return t.indexOf(e)===r})},Fishsticss=function(){this.patterns={selector:/([_a-zA-Z0-9-:,#:.\[\]="\s]?[_a-zA-Z0-9-*:>+,#:.\(\)\[\]=|~^$"\s]*)\s*\{\s*([\S\s]*?)\s*\}/gm,rule:/(-?[_a-zA-Z]+[_a-zA-Z0-9-]*)\s*:\s*([_a-zA-Z0-9-%#'",.\(\)\s]+);*/gm,comment:/\/\*[\S\s]*\*\//gm},this.scrub=function(e,r){for(var t=function(e,n){var s=!1;if(r.convert!==!1)for(var a=0;a<n.length;a++){var c=[];if(e.selector.length>=n[a].selector.length)for(var o=0;o<e.selector.length;o++)for(var l=0;l<n[a].selector.length;l++)if(e.selector[o]!==n[a].selector[l]&&0===e.selector[o].indexOf(n[a].selector[l])){var i=e.selector[o].substr(n[a].selector[l].length).charAt(0).toUpperCase();i.match(/^[A-Z]/)||c.push([o,l])}if(c.length===e.selector.length){s=!0;for(var h=0;h<e.selector.length;h++)e.selector[h]=e.selector[h].substr(n[a].selector[c[h][1]].length),e.selector[h]=" "===e.selector[h].charAt(0)?e.selector[h].trim():"&"+e.selector[h].trim();e.selector=arrayUnique(e.selector),t(e,n[a].descendants)}}s||n.push(e)},n=[],s=[],a;a=this.patterns.selector.exec(e);){for(var c={selector:a[1].replace(/\n+/gm," ").replace(/\s*,+\s*/gm,",").replace(/,+$/gm,"").trim().split(","),rules:[],descendants:[],index:a.index},o;o=this.patterns.rule.exec(a[2]);){if(r.variables===!0){var l;(l=/#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/.exec(o[2]))&&-1===s.indexOf(l[1])&&s.push(l[1])}c.rules.push({property:o[1],value:o[2]})}t(c,n)}var i=[],h;if(r.comments===!0)for(;h=this.patterns.comment.exec(e);)i.push({content:h[0],index:h.index});var f="",v=0,u="sass"===r.convert?"":";",p="sass"===r.convert?["",""]:["{","}"],g=function(e){for(var r="",t=0;e>t;t++)r+="	";return r},d=function(e,r){for(var t in e){i.length&&i[0].index<e[t].index&&(f.length>0&&"\n"!==f.charAt(f.length-1)&&(f+="\n"),f+=g(r)+i[0].content+"\n",0===r&&(f+="\n"),i.splice(0,1)),f+=g(r)+e[t].selector.join(", ")+" "+p[0]+"\n";var n=e[t].rules;for(var a in n){for(var c in s)n[a].value.indexOf(s[c])>-1&&(n[a].value=n[a].value.replace("#"+s[c],"@var"+(parseInt(c)+1)));f+=g(r)+"	"+n[a].property+": "+n[a].value+u+"\n"}e[t].descendants.length>-1&&d(e[t].descendants,r+1),f+=g(r)+p[1]+"\n"}};if(n.length){if(r.convert!==!1&&r.variables===!0&&s.length>0){var A="less"===r.convert?"@":"$";for(var m in s){var x="var",y=s[m];3===y.length&&(y=y.charAt(0)+y.charAt(0)+y.charAt(1)+y.charAt(1)+y.charAt(2)+y.charAt(2)),f+=A+x+(parseInt(m)+1)+": #"+y+u+"\n"}f+="\n"}d(n,v)}return f}};